<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>七夕 · 打开这封樱花信</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Noto+Serif+SC:wght@400;600;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
<style>
:root{
  --sakura-pink: #ffb7d5;
  --sakura-pink-2: #ffe3f0;
  --mint-green: #b2f7ef;
  --pearl-white: #fffefa;
  --ink: #2d2a32;
  --glass: rgba(255,255,255,.85);
  --blur: 18px;
  --radius: 22px;
  --accent: #ff8bb4;
  --shadow: 0 6px 28px 0 #ffb7d51a, 0 1.5px 9px #b2f7ef2a;
  --radius-big: 32px;
  --transition: .28s cubic-bezier(.65,.05,.36,1);
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{min-height:100vh;}
body{
  font-family:'Inter','Noto Serif SC',serif;
  background:linear-gradient(120deg, var(--sakura-pink) 0%, var(--mint-green) 100%);
  color:var(--ink);
  overflow-x:hidden;
  transition:background .7s;
}
a{color:inherit;text-decoration:none}
.hidden{display:none}
/* 樱花背景飘落层 */
.sakura-bg{
  position:fixed;
  left:0;top:0;right:0;height:260px;
  pointer-events:none;
  z-index:1;
}
.sakura-petal{
  position:absolute;
  width:30px;height:30px;
  background:radial-gradient(circle 12px at 10px 10px,#fff6 60%,transparent 90%),linear-gradient(135deg,var(--sakura-pink) 75%,#fff0 100%);
  border-radius:60% 45% 60% 45% / 55% 60% 45% 60%;
  transform:rotateZ(var(--r,0deg)) scale(var(--s,1));
  opacity:.90;
  animation:sakura-fall 7.2s linear infinite;
  box-shadow:0 3px 18px #ffb7d533;
}
@keyframes sakura-fall{
  0%{transform:translateY(-40px) rotateZ(var(--r,0deg)) scale(var(--s,1));opacity:.90;}
  80%{opacity:.90;}
  100%{transform:translateY(420px) rotateZ(calc(var(--r,0deg) + 120deg)) scale(var(--s,1.18));opacity:0;}
}
.cover{
  position:fixed;inset:0;display:grid;place-items:center;z-index:50;
  background:linear-gradient(120deg,#fff6fb 60%,#e7fff8 100%);
  transition:opacity .38s;
}
.envelope{
  width:min(96vw,420px);height:260px;position:relative;perspective:1600px;
  margin-top:clamp(0px,10vh,60px);
}
.env-body{
  position:absolute;inset:0;border-radius:22px;
  background:linear-gradient(180deg, var(--pearl-white) 80%, #ffe8f3 110%);
  box-shadow:var(--shadow);
  border:2.2px solid var(--sakura-pink);
  z-index:2;
}
.env-flap{
  position:absolute;inset:0;transform-origin:top;transform:rotateX(0deg);
  transition:transform .95s cubic-bezier(.2,.7,.1,1);
  clip-path:polygon(0 0,100% 0,50% 80%);
  background:linear-gradient(180deg,#ffd8ec 60%,#c9ece6 120%);
  border-top-left-radius:22px;border-top-right-radius:22px;
  border-bottom:2px solid var(--sakura-pink);
  box-shadow:0 3px 12px #ffb7d523;
  z-index:3;
}
.env-letter{
  position:absolute;left:7%;right:7%;top:15%;bottom:10%;
  background:var(--pearl-white);
  border-radius:20px;
  padding:18px 16px 18px 22px;
  overflow:auto;
  box-shadow:inset 0 0 0 1px #ffd8ec18,0 7px 24px #ffd8ec1c;
  font-family:'Noto Serif SC',serif;line-height:2.03;font-size:16px;
  background-image:repeating-linear-gradient(180deg, #ffe3f0 0 2px, transparent 2px 42px);
  animation:letterFloat 3.2s ease-in-out infinite alternate;
  z-index:4;
}
@keyframes letterFloat{
  0%{transform:translateY(0);}
  100%{transform:translateY(4px);}
}
.env-letter h2{margin:0 0 8px;font-weight:900;font-size:23px;letter-spacing:.08em;}
.open-btn{
  position:absolute;inset:auto 0 12px;display:flex;justify-content:center;z-index:10;
}
.open-btn .btn{
  cursor:pointer;padding:9px 22px;border-radius:999px;
  background:linear-gradient(90deg, var(--sakura-pink),var(--mint-green));
  color:#fff;font-weight:700;border:0;font-size:17px;
  letter-spacing:.04em;
  box-shadow:0 2px 12px #ffb7d51a,0 0.5px 3px #b2f7ef2a;
  outline:none;
  transition:transform .11s;
  border:2px solid #fff;
}
.open-btn .btn:active{transform:scale(1.07);}
.opened .env-flap{transform:rotateX(180deg)}
.app{
  opacity:0;pointer-events:none;transform:translateY(24px);transition:opacity .7s,transform .7s
}
.app.ready{opacity:1;pointer-events:auto;transform:none}
.container{
  max-width:920px;margin:clamp(48px,8vw,86px) auto 0;padding:0 9vw 0 9vw;z-index:2;position:relative;
  background:rgba(255,255,255,.06);border-radius:var(--radius-big);
  box-shadow: 0 2px 24px #ffb7d51a;
  min-height:50vh;
}
header.hero{
  text-align:center;margin-bottom:32px;position:relative;z-index:2;
  padding-top:13px;
}
.title{
  font-family:'Pacifico',cursive;font-size:clamp(30px,7vw,48px);
  background:linear-gradient(92deg,var(--sakura-pink),var(--mint-green),var(--accent));
  -webkit-background-clip:text;color:transparent;cursor:pointer;
  user-select:none;position:relative;
  letter-spacing:.11em;
  filter:drop-shadow(0 0 8px #ffb7d546);
  transition:filter .18s;
}
.title:active{filter:drop-shadow(0 0 12px #ffb7d58a);}
.subtitle{
  font-size:clamp(13px,3vw,17px);
  color:#0008;margin-top:10px;letter-spacing:.09em;
  font-family:'Noto Serif SC',serif;
}
.couple{
  display:grid;grid-template-columns:repeat(2,1fr);gap:18px;margin-top:12px;
  margin-bottom:10px;
}
.card{
  padding:18px 0 14px 0;text-align:center;border-radius:var(--radius);
  background:var(--glass);
  backdrop-filter:blur(var(--blur));
  box-shadow:var(--shadow);
  border:2.2px solid var(--mint-green);
  position:relative;
  min-width:0;
  transition:box-shadow .18s;
}
.avatar{
  width:clamp(86px,22vw,124px);height:clamp(86px,22vw,124px);border-radius:50%;margin:0 auto 10px;overflow:hidden;
  box-shadow:0 10px 24px #ffb7d53c,0 2px 12px #0001;
  border:4px solid #fff;background:#fff;cursor:pointer;position:relative;
  transition:transform .2s,box-shadow .2s;
}
.avatar:active{transform:scale(1.09);box-shadow:0 0 32px #ffb7d544;}
.avatar img{width:100%;height:100%;object-fit:cover}
.name{font-weight:800;font-size:clamp(16px,3vw,19px);}
.quote{
  padding:21px 10vw 20px 10vw;margin-top:clamp(18px,3vw,22px);
  font-family:'Noto Serif SC',serif;background:var(--glass);
  border-radius:var(--radius);text-align:center;font-size:clamp(15px,3vw,19px);
  box-shadow:0 4px 18px #ffd8ec2b;
  border:1.2px dashed var(--sakura-pink);
  background-image:repeating-linear-gradient(90deg,#ffe3f0 0 4px,transparent 4px 40px);
  transition:background .15s;
  min-height:3.5em;
}
.letter{
  padding:clamp(15px,4vw,32px) clamp(9px,4vw,36px) clamp(14px,3vw,28px) clamp(19px,6vw,44px);
  font-family:'Noto Serif SC',serif;line-height:2.15;
  background:var(--glass);
  border-radius:var(--radius);
  margin-top:clamp(18px,3vw,22px);
  box-shadow:0 2px 14px #b2f7ef2a;
  border:1.6px solid var(--sakura-pink);
  background-image: repeating-linear-gradient(180deg, #ffe3f0 0 2px, transparent 2px 40px);
  font-size:clamp(15px,3vw,18px);
  position:relative;
  animation:letterFloat 4.2s ease-in-out infinite alternate;
}
.letter .sign{
  display:block;text-align:right;margin-top:12px;color:var(--accent);font-weight:600;font-size:1em;letter-spacing:.06em;font-family:'Pacifico',cursive;
}
footer{text-align:center;margin:34px 0 22px 0;color:#0008;font-size:15px;}
.year{font-weight:800;color:var(--accent);}
.player{
  position:fixed;right:20px;bottom:20px;width:60px;height:60px;border-radius:50%;display:grid;place-items:center;
  color:#fff;cursor:pointer;z-index:40;
  background:conic-gradient(var(--accent) 0 var(--p,0%),#e5e5e5 var(--p,0%));
  box-shadow:0 14px 34px #ffb7d53a;
  transition:background .3s;
}
.player .btn{
  position:absolute;inset:7px;border-radius:50%;display:grid;place-items:center;
  background:linear-gradient(90deg, var(--sakura-pink),var(--mint-green));
  box-shadow:0 1px 8px #ffb7d53a;
}
.player .btn i{font-size:22px;}
@media (max-width:600px){
  .player{right:12px;bottom:8px;width:52px;height:52px;}
  .player .btn{inset:6px;}
}
.firework{
  position:fixed;border-radius:50%;pointer-events:none;animation:explode 1.14s cubic-bezier(.6,.1,.7,1) forwards;
  z-index:99;
}
@keyframes explode{
  from{transform:scale(.18);opacity:1}
  to{transform:scale(2.2);opacity:0}
}
.heart{
  position:fixed;width:18px;height:18px;background:var(--accent);transform:rotate(45deg);border-radius:5px;opacity:.84;
  animation:floatUp 1.3s cubic-bezier(.7,.1,.5,1) forwards;
}
.heart:before,.heart:after{
  content:"";position:absolute;width:18px;height:18px;background:inherit;border-radius:50%;
}
.heart:before{left:-9px}
.heart:after{top:-9px}
.ribbon{
  position:fixed;pointer-events:none;width:2.2px;height:38px;
  background:linear-gradient(to bottom,var(--mint-green),var(--sakura-pink),var(--accent));
  border-radius:5px;opacity:.7;
  animation:ribbon-fall 1.2s cubic-bezier(.7,.1,.5,1) forwards;
  z-index:99;
}
@keyframes ribbon-fall{
  to{transform:translateY(60px) scaleX(.7) rotateZ(40deg);opacity:0;}
}
@keyframes floatUp{
  to{transform:translateY(-130px) scale(1.26) rotate(45deg);opacity:0}
}
.sakura-float{
  position:fixed;width:30px;height:30px;pointer-events:none;z-index:99;
  animation:sakuraFloat 2.7s linear forwards;
  opacity:.96;
}
@keyframes sakuraFloat{
  0%{transform:translateY(0) rotate(0deg) scale(.8);}
  80%{opacity:.92;}
  100%{transform:translateY(220px) rotate(140deg) scale(1.12);opacity:0;}
}
/* mobile适配和优化 */
@media (max-width:800px){
  .container{padding:0 3vw 0 3vw;}
  .couple{gap:12px;}
  .quote{padding-left:1vw;padding-right:1vw;}
}
@media (max-width:500px){
  .container{padding:0 1vw 0 1vw;border-radius:18px;}
  .quote{padding-left:2vw;padding-right:2vw;}
  .card{padding:13px 0 9px 0;}
  .letter{padding:13px 6px 13px 12px;}
  .env-letter{padding:11px 7px 17px 14px;}
}
::-webkit-scrollbar{width:8px;background:transparent;}
::-webkit-scrollbar-thumb{background:#ffb7d51a;border-radius:5px;}
/* 弹窗 */
#modal{
  display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;z-index:100;align-items:center;justify-content:center;
  backdrop-filter:blur(5px) brightness(1.04);
  background:rgba(255,183,213,.14);
  transition:background .18s;
}
#modal>div{
  background:var(--pearl-white);border-radius:24px;box-shadow:0 8px 38px #ffb7d53a;padding:34px 20px;max-width:92vw;font-size:18px;line-height:2.1;color:var(--ink);text-align:center;border:2px solid var(--sakura-pink);position:relative;
  animation:modalIn .35s;
}
@keyframes modalIn{from{transform:scale(.8);opacity:.4;}to{transform:scale(1);opacity:1;}}
#modal-close{margin-top:18px;padding:8px 30px;border-radius:999px;border:0;background:linear-gradient(90deg,var(--sakura-pink),var(--mint-green));color:#fff;font-size:16px;font-weight:700;box-shadow:0 2px 8px #ffb7d52a;cursor:pointer;}
/* 小动画优化 */
@media (hover:none){
  .env-flap:active{filter:brightness(.95);}
  .open-btn .btn:active{filter:brightness(.93);}
  .avatar:active{filter:brightness(.93);}
}
</style>
</head>
<body>
<!-- 樱花飘落背景 -->
<div class="sakura-bg" id="sakura-bg"></div>
<section class="cover" id="cover">
  <div class="envelope" id="envelope">
    <div class="env-body"></div>
    <div class="env-flap" id="flap"></div>
    <div class="env-letter">
      <h2>致 · 你</h2>
      <p>这是我写给你的一封樱花信，愿我们永远心心相印。</p>
    </div>
    <div class="open-btn">
      <button class="btn" id="openBtn">
        <i class="fa-solid fa-envelope-open"></i>&nbsp;打开
      </button>
    </div>
  </div>
</section>
<main class="app" id="app">
  <div class="container">
    <header class="hero">
      <h1 class="title" id="title">七夕 · 樱花限定</h1>
      <div class="subtitle">愿我们的爱如樱花般绚烂 · 永远盛放</div>
    </header>
    <section class="couple">
      <div class="card">
        <div class="avatar" id="av-jy"><img src="xjy.png" alt="小婧仪"/></div>
        <div class="name">小婧仪</div>
      </div>
      <div class="card">
        <div class="avatar" id="av-xy"><img src="xy.png" alt="小瑶"/></div>
        <div class="name">小瑶</div>
      </div>
    </section>
    <section class="quote" id="quote">“樱花落满肩，你是心头欢。”</section>
    <article class="letter" id="letter">
      亲爱的婧仪：<br><br>
      遇见你，是我生命里最绚烂的樱花季。愿我们把每一天，都过成只属于我们的节日。<br>
      <span class="sign">爱你的 · 小瑶 ❤</span>
    </article>
    <footer>
      <div class="year">2025 · 七夕</div>
      <div>樱花为证，永远爱你</div>
    </footer>
  </div>
</main>
<div class="player" id="player" title="播放/暂停">
  <div class="btn"><i class="fa-solid fa-play"></i></div>
  <audio id="audio" preload="auto" loop>
    <source src="music.mp3" type="audio/mpeg" />
    <source src="https://upload.wikimedia.org/wikipedia/commons/4/47/Nocturne_in_E-flat_major%2C_Op._9%2C_No._2_%28F._Chopin%29.ogg" type="audio/ogg" />
  </audio>
</div>
<!-- 提示弹窗 -->
<div id="modal">
  <div>
    <div id="modal-text"></div>
    <button id="modal-close">知道啦</button>
  </div>
</div>
<script>
// 樱花背景飘落
const sakuraBg = document.getElementById('sakura-bg');
function randomPetal(){
  const petal = document.createElement('div');
  petal.className = 'sakura-petal';
  petal.style.left = Math.random()*100+'vw';
  petal.style.top = (Math.random()*220)+'px';
  petal.style.setProperty('--r', Math.floor(Math.random()*360)+'deg');
  petal.style.setProperty('--s', (0.9+Math.random()*0.8).toFixed(2));
  sakuraBg.appendChild(petal);
  setTimeout(()=>petal.remove(), 7200);
}
setInterval(randomPetal, 620);

// 信封动画与长按寄语
const cover=document.getElementById('cover');
const envelope=document.getElementById('envelope');
const flap=document.getElementById('flap');
const openBtn=document.getElementById('openBtn');
const app=document.getElementById('app');
let longpressTimer = null;
function openEnvelope(){
  envelope.classList.add('opened');
  setTimeout(()=>{
    cover.style.opacity='0';
    setTimeout(()=>{cover.classList.add('hidden');app.classList.add('ready')},440);
  },680);
}
flap.addEventListener('click',openEnvelope);
openBtn.addEventListener('click',openEnvelope);

// 长按信封弹隐藏寄语
const modal = document.getElementById('modal');
const modalText = document.getElementById('modal-text');
const modalClose = document.getElementById('modal-close');
const secretNotes = [
  "你是我想藏在心里，偷偷欢喜一辈子的人🌸",
  "喜欢你，就像春风十里，樱花盛开，满心欢喜。",
  "如果爱有形状，那一定是你笑着看我的样子。",
  "我想和你一起看尽人间烟火，再看樱花慢慢飘落。",
  "樱花会落下，但我对你的喜欢永不会。",
  "和你在一起，每一天都是粉色的春天。",
  "你是我的小确幸，也是我所有温柔的原因。",
  "我的每一句想你，都落在樱花瓣上，随风飘向你。",
  "遇见你，是我一生中最美的浪漫。",
  "只想把全世界最温柔的樱花雨，都送给你。"
];
function showModal(msg){
  modalText.innerHTML = msg;
  modal.style.display = 'flex';
}
modalClose.addEventListener('click',()=>{modal.style.display='none';});
envelope.addEventListener('touchstart',startLongPress);
envelope.addEventListener('mousedown',startLongPress);
envelope.addEventListener('touchend',clearLongPress);
envelope.addEventListener('mouseup',clearLongPress);
envelope.addEventListener('mouseleave',clearLongPress);
function startLongPress(e){
  clearLongPress();
  longpressTimer = setTimeout(()=>{
    showModal(secretNotes[Math.floor(Math.random()*secretNotes.length)]);
  }, 670);
}
function clearLongPress(){
  if(longpressTimer){clearTimeout(longpressTimer);longpressTimer=null;}
}

// 烟花彩蛋
const title=document.getElementById('title');
title.addEventListener('click',()=>{
  const centerX = window.innerWidth/2, centerY = window.innerWidth<600? 90 : 120;
  for(let i=0;i<17+Math.floor(Math.random()*5);i++){
    const fw=document.createElement('div');
    fw.className='firework';
    const size=11+Math.random()*20;
    fw.style.width=fw.style.height=size+'px';
    fw.style.left=(centerX+Math.cos(i*0.45)*80+Math.random()*70-35)+'px';
    fw.style.top=(centerY+Math.sin(i*0.41)*60+Math.random()*44-22)+'px';
    fw.style.background=`linear-gradient(135deg,hsl(${Math.random()*360},91%,71%),#fff8)`;
    fw.style.boxShadow=`0 0 12px 2px hsl(${Math.random()*360},80%,70%)`;
    document.body.appendChild(fw);
    setTimeout(()=>fw.remove(),1200);
  }
});

// 双击背景：樱花瓣飘落
document.body.addEventListener('dblclick',(e)=>{
  for(let i=0;i<10;i++){
    const s=document.createElement('img');
    s.src='https://img1.imgtp.com/2023/08/28/9EoH3Z6K.png';
    s.className='sakura-float';
    s.style.left=(e.clientX+Math.random()*50-30)+'px';
    s.style.top=(e.clientY+Math.random()*20-10)+'px';
    s.style.transform+='rotate('+(Math.random()*360)+'deg)';
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),2700);
  }
});

// 点击头像：爱心和彩带爆发
function heartBurst(x,y){
  for(let i=0;i<9;i++){
    const h=document.createElement('div');
    h.className='heart';
    h.style.left=x+(Math.random()*44-21)+'px';
    h.style.top=y+(Math.random()*40-20)+'px';
    h.style.background=`linear-gradient(135deg,var(--accent),var(--sakura-pink),var(--mint-green))`;
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1300);
  }
  for(let i=0;i<5;i++){
    const r=document.createElement('div');
    r.className='ribbon';
    r.style.left=x+(Math.random()*38-19)+'px';
    r.style.top=y+(Math.random()*30-15)+'px';
    r.style.transform='rotate('+Math.random()*160+'deg)';
    document.body.appendChild(r);
    setTimeout(()=>r.remove(),1200);
  }
}
document.getElementById('av-jy').addEventListener('click',e=>{
  heartBurst(e.clientX,e.clientY)
});
document.getElementById('av-xy').addEventListener('click',e=>{
  heartBurst(e.clientX,e.clientY)
});

// 句子切换
const quotes=[
  '你是我心中的樱花，盛开在最美的季节。',
  '想和你一起，看漫天樱花，直到白发苍苍。',
  '世界很大，遇见你刚刚好。',
  '温柔只为你，浪漫给樱花。',
  '你笑时，樱花都开了。',
  '樱花树下，你是我的唯一。',
  '陪你看尽繁樱似雪，是我最想做的事。',
  '所有樱花都开了，你终于来了。',
  '愿此刻如樱，岁岁年年。'
];
const q=document.getElementById('quote');
q.addEventListener('click',()=>{q.textContent='“'+quotes[Math.floor(Math.random()*quotes.length)]+'”';});

// 音乐播放器
const audio=document.getElementById('audio');
const player=document.getElementById('player');
const icon=player.querySelector('i');
let raf=null;
function updateProgress(){
  const p=audio.duration?(audio.currentTime/audio.duration)*100:0;
  player.style.setProperty('--p',p+'%');
  raf=requestAnimationFrame(updateProgress);
}
player.addEventListener('click',async()=>{
  if(audio.paused){
    try{
      await audio.play();
      icon.className='fa-solid fa-pause';
      updateProgress();
    }catch(err){
      alert('请先与页面交互后再点播放');
    }
  }else{
    audio.pause();
    icon.className='fa-solid fa-play';
    if(raf)cancelAnimationFrame(raf);
  }
});
</script>
</body>
</html>